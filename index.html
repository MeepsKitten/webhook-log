<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>My Webhook Feed</title>
  <style>
    body { font-family: system-ui, sans-serif; margin: 2rem; }
    .req { border: 1px solid #ddd; border-radius: 12px; padding: 1rem; margin: 0 0 1rem; }
    .meta { font-size: 0.9rem; opacity: 0.7; margin-bottom: .5rem; }
    pre { white-space: pre-wrap; word-wrap: break-word; background: #fafafa; padding: .75rem; border-radius: 8px; }
  </style>
</head>
<body>
  <h1>Incoming Webhook Posts</h1>
  <div id="list">Loading…</div>

  <script>
    const TOKEN = "96b1ec35-a330-492a-a304-d0528bf73dd9";
    const API_KEY = "9301aaaa-f15a-4e00-98fb-ada337eb2c17";
    const list = document.getElementById("list");

    async function load(page = 1) {
      const url = `https://webhook.site/token/${TOKEN}/requests?sorting=newest&per_page=50&page=${page}`;
      const r = await fetch(url, { headers: { "api-key": API_KEY, "accept": "application/json" }});
      if (!r.ok) { list.textContent = "Failed to fetch. Check token/API key."; return; }
      const data = await r.json();
      list.innerHTML = "";
      for (const req of data.data) {
        const div = document.createElement("div");
        div.className = "req";
        // Try to pretty-print JSON body if possible, else show raw
        let body = req.content || "";
        try { body = JSON.stringify(JSON.parse(body), null, 2); } catch {}
        div.innerHTML = `
          <div class="meta">${req.method} ${req.url} — ${req.created_at} — ${req.ip}</div>
          <pre>${body}</pre>
        `;
        list.appendChild(div);
      }
    }

    load();
    // Optional: live refresh every 5s
    setInterval(load, 5000);
  </script>
</body>
</html>
